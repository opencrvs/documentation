---
description: >-
  Perform an advanced search of civil registration records from a trusted,
  external e-Gov service
---

# Record Search clients

The Record Search client can perform an advanced search of civil registration records. Use this to help support social protection systems, check the existence of civil registration records or check citizen demographics.

<figure><img src="../../../.gitbook/assets/Screenshot 2023-01-11 at 17.17.45.png" alt=""><figcaption></figcaption></figure>

To stop abuse of such a powerful API, all results returned are audited as having been downloaded by the client. System Administrators should be careful to ensure that citizen data is not exposed to untrustworthy individuals by using this API.

{% hint style="danger" %}
All client behaviour is audited and is ultimately the personal responsibility of the National System Administrator of OpenCRVS that created the client. Protect citizen data and do not expose it unnecessarily as you may be in breach of local laws.
{% endhint %}

{% hint style="info" %}
A daily limit of 2000 Record Search requests per client, per day is hardcoded into OpenCRVS Core. Any subsequent requests will fail.
{% endhint %}

{% hint style="info" %}
You can use our [Postman collections](https://github.com/opencrvs/opencrvs-countryconfig/tree/master/postman) to test Record Search API functionality. [Postman](https://www.postman.com/) is a tool you can download to test API access before building your integrations.
{% endhint %}

**Submitting a Record Search**

To submit an Record Search, your client must first request an [authorization token ](authenticate-a-client.md)using your `client_id` and `client_secret`.

#### Record Search Requests

With the token as an authorization header, the following example request will submit a record search in GraphQL. GraphQL is the chosen protocol as this API re-uses the same **Advanced Search** GraphQL queries that are used buy the OpenCRVS GUI.

{% hint style="info" %}
You can browse to the [GraphQL Playground](https://www.apollographql.com/docs/apollo-server/v2/testing/graphql-playground/) using an authorization header to view the full documentation for the searchEvents GraphQL query.

https://gateway.your\_domain/graphql
{% endhint %}

<figure><img src="../../../.gitbook/assets/Screenshot 2023-01-11 at 17.33.01.png" alt=""><figcaption><p>The GraphQL Playground for OpenCRVS</p></figcaption></figure>

The API and parameters explained below. A full list of available Advanced Search GraphQL variables is also explained below.

{% openapi-operation spec="record-search" path="/graphql" method="post" %}
[OpenAPI record-search](https://gitbook-x-prod-openapi.4401d86825a13bf607936cc3a9f3897a.r2.cloudflarestorage.com/raw/e1db6b2ce67c739a754f530156c76a8d0197722d00a870f80115a5de4f5aac2f.yaml?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=dce48141f43c0191a2ad043a6888781c%2F20250716%2Fauto%2Fs3%2Faws4_request&X-Amz-Date=20250716T110005Z&X-Amz-Expires=172800&X-Amz-Signature=6acd506d573741f0f03de85e8724b34d87a51f6c2c1e6569932b80a9cbc67f40&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject)
{% endopenapi-operation %}

**GraphQL Parameters**

| Parameter                            | Description                                                                                                                                                                                  |
| ------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `operationName`                      | Must be "searchEvents"                                                                                                                                                                       |
| `query`                              | Use the exhaustive GraphQL syntax supplied or remove individual return parameters if you do not require that citizen information. **Protect citizen's privacy! Only request what you need.** |
| `variables.advancedSearchParameters` | A JSON object of optional search parameters listed below                                                                                                                                     |
| `count`                              | The number of records to be returned per page                                                                                                                                                |
| `skip`                               | Pagination offset                                                                                                                                                                            |

**GraphQL variables.advancedSearchParameters object**

We recommend that you use the Advanced Search feature in the OpenCRVS application and monitor the GraphQL payload that is sent to the Gateway using the Chrome Developer Tools "Network" tab, in order to understand how these parameters are formatted. The table below lists all possible parameters with a description and example where we feel further explanation is helpful.

| Parameter                 | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Example                                                                     |
| ------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------- |
| `event`                   | An enum for the registration event. Can be "birth" or "death"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `birth`                                                                     |
| `name`                    | A string that can be used to search ALL names.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                             |
| `registrationStatuses`    | An array of possible application status enums. [Possible statuses](https://github.com/opencrvs/opencrvs-core/blob/85887d640150b16f4e4e04dc772335b37dd6bc4f/packages/search/src/features/search/utils.ts#L79) are listed here. Remove "\_STATUS" when providing the value. Examples listed in the next cell.                                                                                                                                                                                                                                                                  | `["REGISTERED", "CERTIFIED", "ISSUED"]`                                     |
| `dateOfEvent`             | The date of event. YYYY-MM-DD                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | <pre class="language-json"><code class="lang-json">2022-12-31
</code></pre> |
|                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                             |
| `recordId`                | A unique uuid for the registration that forms part of the QR code URL on the certificate. Use this to **validate** a certificate.                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                             |
| `dateOfEventStart`        | If you dont know the date of event, you can enter a start and end date to search within a range. YYYY-MM-DD                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                             |
| `dateOfEventEnd`          | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| `contactNumber`           | The informant's mobile phone number with country code                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                                             |
| `nationalId`              | Any national id associated with any individual who has been involved in a registration event as a string                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| `registrationNumber`      | An event registration number as a string                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| `trackingId`              | An application tracking id as a string                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                             |
| `dateOfRegistration`      | The date of registration. YYYY-MM-DD                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                                                                             |
| `dateOfRegistrationStart` | If you dont know the date of registration, you can enter a start and end date to search within a range. YYYY-MM-DD                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                                                                             |
| `dateOfRegistrationEnd`   | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| `declarationLocationId`   | A FHIR Location uuid for the **a registration office.** You can search all registrations that were made in an office. You retrieve these ids using our open [Location API](../fhir-location-rest-api.md). Your offices are customised for your country needs in [this step.](https://github.com/opencrvs/documentation/blob/release-v1.3.0/setup/3.-installation/3.2-set-up-your-own-country-configuration/3.2.3-set-up-cr-offices-and-health-facilities)                                                                                                                    | `031dc5a6-ea63-47e6-a818-191cc12a9b92`                                      |
| `eventLocationId`         | When searching by the hospital location in which an event took place, this is a FHIR Location uuid for a **facility that is already in the OpenCRVS database to track places of births or deaths in health institutions.** You can retrieve these ids using our open [Location API](../fhir-location-rest-api.md). Your health facilities are customised for your country needs in [this step.](https://github.com/opencrvs/documentation/blob/release-v1.3.0/setup/3.-installation/3.2-set-up-your-own-country-configuration/3.2.3-set-up-cr-offices-and-health-facilities) | `031dc5a6-ea63-47e6-a818-191cc12a9b92`                                      |
| `eventCountry`            | When searching for the administrative location in which an event took place e.g. place of birth, then this is an [alpha 3 country code ](https://www.iban.com/country-codes)for the country.                                                                                                                                                                                                                                                                                                                                                                                 |                                                                             |
| eventLocationLevel1       | When searching for the administrative location in which an event took place e.g. place of birth, then this is a FHIR Location uuid for the **locationLevel1 if applicable, technically expressed in FHIR as a "state".** You can retrieve these ids using our open [Location API](../fhir-location-rest-api.md). Your location levels are customised for your country needs in [this step](https://github.com/opencrvs/documentation/blob/release-v1.3.0/setup/3.-installation/3.2-set-up-your-own-country-configuration/3.2.2-set-up-administrative-address-divisions).     | `031dc5a6-ea63-47e6-a818-191cc12a9b92`                                      |
| eventLocationLevel2       | When searching for the administrative location in which an event took place e.g. place of birth, then this is a FHIR Location uuid for the **locationLevel2 if applicable, technically expressed in FHIR as a "district".** You can retrieve these ids using our open [Location API](../fhir-location-rest-api.md). Your location levels are customised for your country needs in [this step](https://github.com/opencrvs/documentation/blob/release-v1.3.0/setup/3.-installation/3.2-set-up-your-own-country-configuration/3.2.2-set-up-administrative-address-divisions).  | `031dc5a6-ea63-47e6-a818-191cc12a9b92`                                      |
| eventLocationLevel3       | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| eventLocationLevel4       | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| eventLocationLevel5       | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| childFirstNames           | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| childLastName             | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| childDoB                  | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| childDoBStart             | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| childDoBEnd               | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| childGender               | A string. Can be "male", "female" or "unknown"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                             |
| childIdentifier           | A string used to search by National ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                             |
| deceasedFirstNames        | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| deceasedFamilyName        | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| deceasedGender            | A string. Can be "male", "female" or "unknown"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                             |
| deceasedDoB               | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| deceasedDoBStart          | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| deceasedDoBEnd            | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| deceasedIdentifier        | A string used to search by National ID                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |                                                                             |
| motherFirstNames          | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| motherFamilyName          | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| motherDoB                 | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| motherDoBStart            | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| motherDoBEnd              | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| motherIdentifier          | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| fatherFirstNames          | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| fatherFamilyName          | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| fatherDoB                 | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| fatherDoBStart            | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| fatherDoBEnd              | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| fatherIdentifier          | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| informantFirstNames       | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| informantFamilyName       | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| informantDoB              | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| informantDoBStart         | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| informantDoBEnd           | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| informantIdentifier       | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| groomDoB                  | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| groomDoBStart             | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| groomDoBEnd               | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| groomIdentifier           | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| groomFirstNames           | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| groomFamilyName           | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| brideDoB                  | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| brideDoBStart             | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| brideDoBEnd               | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| brideIdentifier           | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| brideFirstNames           | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |
| brideFamilyName           | As above                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                             |

**Record Search Response**

The response from a record search is not FHIR, but an Elasticsearch response.&#x20;

After a search has completed and if you search for any record returned, you will see that in Record Audit, an entry shows that this client has accessed the personally identifiable citizen data on the record.

<figure><img src="../../../.gitbook/assets/Screenshot 2023-01-16 at 11.49.25.png" alt=""><figcaption></figcaption></figure>
