# 4.1.1 Install the required dependencies

### Hardware requirements
- 16G RAM
- 8 CPU (at least Intel 8th generation)
- 100G free storage space

### Install dependencies locally

OpenSource software is required to be installed on your local machine in order to run OpenCRVS. Ensure you have satisfied all of the following requirements before continuing:

* [ ] **Operation system**: Linux or Unix operating system is required: OpenCRVS has been tested on Ubuntu 24.04 LTS and Mac OSX : If you do not have Ubuntu or MacOSX, use [WSL](https://learn.microsoft.com/en-us/windows/wsl/) or install a [virtual](https://www.virtualbox.org/) [Ubuntu](https://ubuntu.com/download/desktop) environment on your computer and use that environment to continue.
* [ ] **Admin rights**: You must have admin rights over your computer and a sudo password
* [ ] **Git**: You must have a [Git](https://github.com/) account and [Git](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) software
* [ ] **Disk space and RAM:** A minimum of 50GB of hard drive space must be available and at least 16GB of RAM. At least 4CPU Cores and 16GB RAM ensure the best experience avoiding any start up errors with ElasticSearch. If you are using virtualisation, ensure this is dedicated to the environment.
* [ ] **Docker**: Install [Docker Desktop](https://www.docker.com/products/docker-desktop/)
* [ ] **NodeJS:** Install Node using the [Node Version Manager](https://nodejs.org/en/download/package-manager/#nvm). This tutorial: [https://www.linode.com/docs/guides/how-to-install-use-node-version-manager-nvm/](https://www.linode.com/docs/guides/how-to-install-use-node-version-manager-nvm/) is quite good compared to the official documentation which is a little hard to follow. Node version: 18.19.0 is required.
* [ ] **Yarn:** Install the [Yarn Package Manager](https://classic.yarnpkg.com/en/docs/install) for Node
* [ ] **Chrome:** Install [Google Chrome](https://www.google.com/chrome). OpenCRVS is a [progressive web application](https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Introduction) and PWA's work best in Chrome.
* [ ] **tmux:** Install [tmux](https://github.com/tmux/tmux/wiki). Multiple terminal windows are required to run OpenCRVS Core alongside the default country configuration. On Ubuntu run: `sudo apt-get install tmux` to install. On Mac, you can install tmux using Homebrew or MacPorts.

---

**NOTE:**
- This guide does not cover prerequisites installation.
- OpenCRVS team has limited capacity to test different configurations. Feel free to submit an issue on GitHub if something doesn't work in your hardware or software setup.

---

### Additional dependencies for development with Kubernetes

Since OpenCRVS 2.0 our team provides a way to run OpenCRVS as a set of Kubernetes pods instead of docker containers, for more information check section [TODO](#link). Additional dependencies are required:

* [ ] **Kubernetes**: For macOS and Windows users, we recommend Docker Desktop with Kubernetes, for Linux users, we recommend Minikube. Use one of available solutions:
  - Install [minikube](https://minikube.sigs.k8s.io/docs/start)
  - Enable kubernetes on Docker Desktop, [Learn more](https://www.docker.com/)
  - Any other available kubernetes engine, e/g OrbStack
* [ ] **kubectl**: Install kubectl, Kubernetes command-line tool, check [here](https://kubernetes.io/docs/tasks/tools/)
* [ ] **helm**: Install [helm](https://helm.sh/docs/intro/install/). Helm is a template engine for managing Kubernetes manifests.
* [ ] **tilt**: Install [tilt](https://docs.tilt.dev/install.html)

### Docker engine and Kubernetes cluster

#### Docker Desktop (with Kubernetes enabled)

Docker desktop with Kubernetes enabled is recommended for development environment on MacOS and Windows. Get more details how to install docker desktop on official website https://www.docker.com/products/docker-desktop/.

Additional configuration for Docker desktop:
  - Enable host networking to be able access http://opencrvs.localhost, otherwise you will need to configure additional tools like proxy.
  - Enable Kubernetes and configure kubectl with correct context
  - Ensure docker-desktop is configured to use at least 12G or more RAM
  - Ensure Storage is set up at least 100G

#### Minikube

Minikube (with docker driver) is recommended way to run Kubernetes on linux. However docker engine is still required for Tilt. Please check official documentation on https://minikube.sigs.k8s.io/docs/.

**NOTE**: 
- Docker support is still experimental for minikube, but it gives better performance in comparison to alternative solutions.

Add following values to /etc/sysctl.conf for linux (Ubuntu) users:
```
fs.inotify.max_user_instances = 8192
fs.inotify.max_user_watches = 65536
```
If you already have minikube cluster running, please recreate it (delete/start) to apply changes properly/

Start minikube with unlimited amount of memory:
```bash
minikube start --cpus=8 --memory=max --ports=80:30080
```

- `--cpus`: Number of CPUs allocated to Kubernetes. Use "max" to use the maximum number of CPUs
- `--memory`: Amount of RAM to allocate to Kubernetes (format: <number>[<unit>], where unit = b, k, m or g).
- `--ports`: List of ports that should be exposed (docker and podman driver only)

